<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K·ªπ S∆∞ Nh√≠ ƒê·∫øm H√¨nh - ƒêa C·∫•p ƒê·ªô</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #e0f7fa; display: flex; flex-direction: column; align-items: center; margin: 0; padding: 20px; min-height: 100vh; }
        h1 { color: #00796b; text-transform: uppercase; margin-top: 40px; text-shadow: 2px 2px #fff; }
        
        .game-container { background: white; padding: 30px; border-radius: 30px; box-shadow: 0 15px 30px rgba(0,0,0,0.15); text-align: center; width: 90%; max-width: 1000px; }
        .level-indicator { font-size: 1.2em; color: #00796b; font-weight: bold; margin-bottom: 10px; background: #b2dfdb; display: inline-block; padding: 5px 20px; border-radius: 20px; }
        
        /* Ch·ªó hi·ªÉn th·ªã ·∫£nh t·ª´ file t·∫£i l√™n */
        .image-display { width: 100%; max-height: 400px; object-fit: contain; border-radius: 15px; margin-bottom: 25px; border: 5px solid #f1f8e9; }
        
        .quiz-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-top: 20px; }
        .shape-card { border: 3px solid #b2dfdb; padding: 15px; border-radius: 20px; background: #f1f8e9; }
        .shape-name { font-size: 1.1em; font-weight: bold; margin-bottom: 10px; }
        
        .options-group { display: flex; justify-content: center; gap: 8px; }
        .btn-option { padding: 10px 15px; font-size: 16px; border: 2px solid #00796b; background: white; border-radius: 10px; cursor: pointer; font-weight: bold; color: #00796b; transition: 0.2s; }
        .btn-option.selected { background-color: #00796b; color: white; transform: scale(1.1); }
        
        .controls { margin-top: 30px; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .btn-check { padding: 15px 50px; font-size: 22px; background-color: #ff9800; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 15px rgba(255,152,0,0.4); }
        .btn-check:hover { background-color: #f57c00; }
        .btn-next { padding: 12px 40px; font-size: 18px; background-color: #4caf50; color: white; border: none; border-radius: 50px; cursor: pointer; display: none; }

        #result-message { font-weight: bold; font-size: 1.4em; min-height: 1.5em; margin-top: 15px; }
        .home-btn { position: fixed; top: 15px; left: 15px; background: #fff; border: 2px solid #00796b; color: #00796b; padding: 8px 15px; border-radius: 30px; text-decoration: none; font-weight: bold; }
    </style>
</head>
<body>
    <a href="index.html" class="home-btn">üè† Menu</a>
    <h1>K·ªπ s∆∞ nh√≠ ƒë·∫øm h√¨nh</h1>
    
    <div class="game-container">
        <div id="level-title" class="level-indicator">V√≤ng 1: ƒê·∫øm kh·ªëi R√¥-b·ªët</div>
        <img id="game-image" src="robot.png" alt="C√¢u h·ªèi" class="image-display">
        
        <p id="instruction" style="font-size: 1.1em;">B√© h√£y nh√¨n h√¨nh v√† ch·ªçn s·ªë l∆∞·ª£ng ƒë√∫ng nh√©!</p>

        <div id="quiz-area" class="quiz-section">
            </div>

        <div class="controls">
            <div id="result-message"></div>
            <button id="check-btn" class="btn-check" onclick="checkCurrentLevel()">Ki·ªÉm tra k·∫øt qu·∫£</button>
            <button id="next-btn" class="btn-next" onclick="nextLevel()">Sang v√≤ng ti·∫øp theo ‚û°Ô∏è</button>
        </div>
    </div>

    <audio id="soundCorrect" src="clap.mp3"></audio>
    <audio id="soundWrong" src="wrong.mp3"></audio>

    <script>
        // C·∫§U H√åNH D·ªÆ LI·ªÜU C√ÅC M√ÄN CH∆†I
        // B·∫°n thay t√™n file ·∫£nh (4.jpg, 5.jpg, 6.jpg) v√†o ƒë√¢y
        const levels = [
            {
                title: "V√≤ng 1: Ch√∫ R√¥-b·ªët th√¥ng minh",
                image: "robot.png",
                questions: [
                    { label: "üü¶ Kh·ªëi vu√¥ng", key: "vuong", answer: 2, options: [2, 4, 6] },
                    { label: "üü® Kh·ªëi ch·ªØ nh·∫≠t", key: "chunhat", answer: 8, options: [2, 5, 8] },
                    { label: "üî¥ Kh·ªëi c·∫ßu", key: "cau", answer: 10, options: [4, 6, 10] },
                    { label: "üü© Kh·ªëi tr·ª•", key: "tru", answer: 2, options: [2, 4, 5] }
                ]
            },
            {
                title: "V√≤ng 2: ƒê·ªì v·∫≠t quanh b√©",
                image: "4.jpg", // ·∫¢nh c√°c h·ªôp s·ªØa, rubik, g·∫°ch...
                questions: [
                    { label: "üü® Kh·ªëi ch·ªØ nh·∫≠t", key: "chunhat", answer: 5, options: [3, 4, 5] }, // H·ªôp s·ªØa, g·∫°ch, loa, h·ªôp b√°nh
                    { label: "üü¶ Kh·ªëi vu√¥ng", key: "vuong", answer: 2, options: [1, 2, 3] }, // Rubik, h·ªôp khƒÉn gi·∫•y
                    { label: "üî¥ Kh·ªëi c·∫ßu", key: "cau", answer: 1, options: [1, 2, 3] }, // B√≥ng r·ªï
                    { label: "üü© Kh·ªëi tr·ª•", key: "tru", answer: 1, options: [1, 2, 3] }  // H·ªôp t√°o Rockit
                ]
            },
            {
                title: "V√≤ng 3: Th·ª≠ th√°ch quan s√°t",
                image: "5.jpg", // ·∫¢nh b√¨nh n∆∞·ªõc, x√∫c x·∫Øc, b√≥ng ƒë√°...
                questions: [
                    { label: "üü¶ Kh·ªëi vu√¥ng", key: "vuong", answer: 2, options: [2, 3, 4] }, // Qu√†, x√∫c x·∫Øc
                    { label: "üü® Kh·ªëi ch·ªØ nh·∫≠t", key: "chunhat", answer: 3, options: [2, 3, 4] }, // Quy·ªÉn s√°ch, h·ªôp gi·∫•y, h·ªôp b√°nh
                    { label: "üî¥ Kh·ªëi c·∫ßu", key: "cau", answer: 3, options: [3, 4, 5] }, // B√≥ng ƒë√°, tennis, ƒë√®n tr√≤n, qu·∫£ c·∫ßu
                    { label: "üü© Kh·ªëi tr·ª•", key: "tru", answer: 4, options: [3, 4, 5] }  // B√¨nh n∆∞·ªõc, ƒë√®n pin, h·ªôp c·∫ßu l√¥ng, h·ªôp h·∫°t ƒëi·ªÅu
                ]
            },
            {
                title: "V√≤ng 4: N·ªôi th·∫•t trong nh√†",
                image: "6.jpg", // ·∫¢nh t·ªß l·∫°nh, k·ªá, gh·∫ø...
                questions: [
                    { label: "üü® Kh·ªëi ch·ªØ nh·∫≠t", key: "chunhat", answer: 4, options: [1, 2,4 ] }, // T·ªß l·∫°nh, K·ªá t·ªß
                    { label: "üü¶ Kh·ªëi vu√¥ng", key: "vuong", answer: 0, options: [0, 1, 2] }, // √î vu√¥ng trong k·ªá
                    { label: "üü© Kh·ªëi tr·ª•", key: "tru", answer: 3, options: [1, 2, 3] }  // Loa/L·ªç tr√™n k·ªá
                ]
            }
        ];

        let currentLevelIndex = 0;
        let userChoices = {};

        function loadLevel() {
            const level = levels[currentLevelIndex];
            document.getElementById('level-title').innerText = level.title;
            document.getElementById('game-image').src = level.image;
            document.getElementById('result-message').innerText = "";
            document.getElementById('next-btn').style.display = "none";
            document.getElementById('check-btn').style.display = "block";
            
            const quizArea = document.getElementById('quiz-area');
            quizArea.innerHTML = ""; // X√≥a m√†n c≈©
            userChoices = {};

            level.questions.forEach(q => {
                userChoices[q.key] = null;
                
                const card = document.createElement('div');
                card.className = 'shape-card';
                card.innerHTML = `<div class="shape-name">${q.label}</div>`;
                
                const optionsGroup = document.createElement('div');
                optionsGroup.className = 'options-group';
                
                q.options.forEach(num => {
                    const btn = document.createElement('button');
                    btn.className = 'btn-option';
                    btn.innerText = num;
                    btn.onclick = function() {
                        // X√≥a class selected trong c√πng nh√≥m
                        optionsGroup.querySelectorAll('.btn-option').forEach(b => b.classList.remove('selected'));
                        btn.classList.add('selected');
                        userChoices[q.key] = num;
                    };
                    optionsGroup.appendChild(btn);
                });
                
                card.appendChild(optionsGroup);
                quizArea.appendChild(card);
            });
        }

        function checkCurrentLevel() {
            const level = levels[currentLevelIndex];
            const msg = document.getElementById('result-message');
            
            // Ki·ªÉm tra xem ƒë√£ ch·ªçn ƒë·ªß ch∆∞a
            const completed = level.questions.every(q => userChoices[q.key] !== null);
            if (!completed) {
                msg.innerText = "B√© h√£y ch·ªçn ƒë·ªß c√°c h√¨nh nh√©!";
                msg.style.color = "#f57c00";
                return;
            }

            // Ki·ªÉm tra ƒë√°p √°n
            const isCorrect = level.questions.every(q => userChoices[q.key] === q.answer);

            if (isCorrect) {
                msg.innerText = "Ch√≠nh x√°c! B√© gi·ªèi qu√°! üåü";
                msg.style.color = "#2e7d32";
                document.getElementById('soundCorrect').play();
                document.getElementById('check-btn').style.display = "none";
                document.getElementById('next-btn').style.display = "block";
                
                if (currentLevelIndex === levels.length - 1) {
                    document.getElementById('next-btn').innerText = "Ho√†n th√†nh t·∫•t c·∫£! üéâ";
                    document.getElementById('next-btn').onclick = () => location.reload();
                }
            } else {
                msg.innerText = "B√© ƒë·∫øm l·∫°i m·ªôt ch√∫t nh√©! Th·ª≠ l·∫°i n√†o.";
                msg.style.color = "#c62828";
                document.getElementById('soundWrong').play();
            }
        }

        function nextLevel() {
            currentLevelIndex++;
            if (currentLevelIndex < levels.length) {
                loadLevel();
            }
        }

        // Kh·ªüi t·∫°o m√†n 1
        window.onload = loadLevel;
    </script>
</body>
</html>